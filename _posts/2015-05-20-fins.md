---
title: Cartesian Ends
tags: mathjax quicklatex
lang: en
packages: |
  \usepackage{amsmath, amssymb, amsthm, 
			amsfonts,stmaryrd, pifont,
			graphicx,hyperref, xcolor,
			anyfontsize, mathrsfs}
\usepackage[all,2cell, cmtip]{xy}\UseAllTwocells
macros: |
  \def\xto#1{\overset{#1}{\to}}
  \newcommand{\xto}[1]{\xrightarrow{#1}}
  \newcommand{\xot}[1]{\xleftarrow{#1}}
  \newcommand{\V}{\mathcal{V}}
  \newcommand{\cate}[1]{\mathbf{#1}}
  \newcommand{\C}{\cate{C}}
  \newcommand{\D}{\cate{D}}
  \newcommand{\A}{\cate{A}}
  \newcommand{\B}{\cate{B}}
  \newcommand{\hugeequal}{\text{\huge =}}
---

## Cartesian Ends

We introduce the notion of _cartesian end_ —generalizing the classical notion of end— in order to study _quasi-(Kan extensions)_. We adopt the terminology used in [**Gray**].

Let `$\A,\B$` be two 2-categories, and `$S\colon \A^\text{op}\times \A\to \B$` be a 2-functor.
<br> &nbsp; **Definition.** &nbsp; A _(projective) quasi-wedge_ based at `$S$` and having edge `$b\in \text{Ob}(\B)$` consists of a triple 
``` tex 
\mathfrak w = \{b, \underline{\omega}_{\text{Ob}}, \underline{\omega}_{\hom}\},
```
made by a collection of 1-cells
``` tex 
\underline{\omega}_{\text{Ob}} = \big\{ \omega_a\colon b\to S(a,a)\big\}
```
<!--- one for each $a\in \text{Ob}(\A)$, and 2-cells
\begin{gather*}
\underline{\omega}_{\hom} = \big\{ \omega_f\colon S(a, f)\circ \omega_{a} \Rightarrow S(f, a')\circ \omega_{a'} \big\}\\
\xymatrix{
B \ar[r]\ar[d] & S(a,a)\ar[d] \\
S(a', a') \ar[r] & S(a, a')
\ar@{=>}(15.5,-2.5);(5.5,-10.5)^{\omega_f}
}
\end{gather*}
one for each $f\colon a\to a'$ in $\A$, such that the following \emph{coherence axioms} are satisfied:
\begin{enumerate}
\item The diagram of 2-cells
``` tex 
\xymatrix@R=1.5cm@C=1.5cm{
B \ar[r]^{\omega_a}\ar[d]_{\omega_{a'}}& \ar@/^1pc/[d]^{S(a,f)} S(a,a)\\
S(a', a') \ar@/_1pc/[r]_{S(f,a')} \ar@/^1pc/[r]^{S(f', a')} & S(a,a')
\ar@{=>}(15,-18);(15,-23)
\ar@{=>}(20,-3);(10,-10)
}\quad 
\xymatrix{\\ \hugeequal \\ }
\quad
\xymatrix@R=1.5cm@C=1.5cm{
B \ar[r]^{\omega_a}\ar[d]_{\omega_{a'}} & \ar@/_1pc/[d]_{S(a, f')}\ar@/^1pc/[d]^{S(a, f)} S(a,a)\\
S(a', a') \ar@/_1pc/[r]_{S(f', a')}& S(a,a')
\ar@{<=}(27,-10);(32,-10)
\ar@{=>}(17,-5);(7,-12)
}
```
is commutative for any $\lambda\colon f\Rightarrow f'$, i.e. the equation
``` tex 
\omega_{f'}\circ (S(a, \lambda)*\omega_a) = (S(\lambda, a') * \omega_{a'})\circ \omega_f
```
holds.
\item For each pair $a\xto{f}a'\xto{f'}a''$ of composable arrows in $\A$, the diagram of 2-cells
``` tex 
\xymatrix@R=7mm@C=7mm{
& B\ar[dr]\ar[dl]\ar[dd] & \\
S(a'', a'')\ar[dd] && S(a,a) \ar[dd]\\
& S(a',a')\ar[dr]\ar[dl]&\\
S(a', a'') \ar[dr]_{S(f,a'')}&& S(a,a')\ar[dl]^{S(a,f')}\\
& S(a, a'')
\ar@{=>}(15,-21);(10,-16)_{\omega_{f'}}
\ar@{=>}(38,-17);(33,-22)_{\omega_f}
\ar@{=}(20,-43);(30,-43)
}\quad 
\xymatrix{\\ \\ \hugeequal \\ }
\quad
\xymatrix@R=7mm@C=7mm{
& B\ar[dr]\ar[dl] & \\
S(a'', a'')\ar[dddr]_{=}\ar[dd] && S(a,a) \ar[dd]\ar[dddl]^=\\
& {\phantom{S(aa)}} &\\
S(a', a'') \ar[dr]&& S(a,a')\ar[dl]\\
& S(a, a'')
\ar@{<=}(15,-18);(35,-18)_{\omega_{f'f}}
}
```
is commutative, i.e. the equation
``` tex 
(S(f, a'') * \omega_{f'})\circ (S(a, f') * \omega_f) = \omega_{f'f}
```
holds.
\item For each $a\in\A$, $\omega_{1_a} = 1_{\omega_a}$.
\end{enumerate}
\end{df}

 \begin{df}[Modification]
\textcolor{red}{\bf todo!}
% A \emph{modification} between two projective quasi-wedges $\mathfrak{w}=\{b, \underline{\omega}\}$ and $\mathfrak{s} = \{b', \underline{\sigma}\}$ consists of a morphism $\varphi\colon b\to b'$ and a collection of 2-cells $\{ m_a\colon \omega_a\Rightarrow \sigma_a\}_{a\in \text{Ob}(\A)}$ such that the diagram of 2-cells
% ``` tex 
% \xymatrix{
% &B \ar@/^1pc/[ddr]
% \ar[d]^\varphi \ar@/_1pc/[ddl]&\\
% & B' %\ar[dr]
% \ar[dl] & \\
% S(a,a) \ar[dr] && S(a',a') \ar[dl]\\
% & S(a, a')
% \ar@{=>}(18,-28);(28,-28)
% \ar@{=>}(10,-11);(14,-15)
% }\quad 
% \xymatrix{\\ \\ \hugeequal \\ }
% \quad
% \xymatrix{
% &B \ar@/^1pc/[ddr] \ar[d]^\varphi \ar@/_1pc/[ddl]&\\
% & B' %\ar[dl]
% \ar[dr] & \\
% S(a,a) \ar[dr] && S(a',a') \ar[dl]\\
% & S(a, a')
% \ar@{=>}(18,-28);(28,-28)
% \ar@{=>}(32,-10);(28,-14)
% }
% ```
% is commutative, i.e. $(\sigma_f * \varphi)\circ (S(a,f) * m_a) = (S(f, a') * m_{a'})\circ \omega_f$.
\end{df}
\begin{df}[Cartesian End]
The lax wedge $\mathfrak w\colon B\to S$, for $S\colon \A^\text{op}\times \A \to \B$ is said to the the \emph{cartesian end} of $S$ if, for any other lax wedge $\mathfrak s\colon B'\to S$, there exists a single 1-cell $x\colon B'\to B$ such that
\begin{gather*}
\omega_a \circ x = \sigma_a \\
\omega_f * x = \sigma_f
\end{gather*}
i.e. the diagram of 2-cells
``` tex 
	bla
```
commutes, and if every modification $\{m_a \colon \mathfrak s\to \mathfrak s'\}$ induces a unique 2-cell $\lambda\colon x\to x'$ ($x'$ the arrow induced by $\mathfrak s'$) in such a way that
``` tex 
	\lambda * \omega_a = m_a.
```
\end{df}
We denote, with an evident and harmless abuse of notation, $B_S = \oint_a S(a,a)$.
\begin{es}
\begin{enumerate}
	\item The \emph{comma objects} \cite{Gray} of a 2-category $\B$ can be identified with the cartesian end of functors $\mathbf{2}^\text{op}\times\mathbf{2}\to \B$
	\item If $F,G\colon \A\to \B$ are 2-functors, then the cartesian end of the functor
	``` tex 
	\B(F,G)\colon \A^\text{op}\times \A\to \cate{Cat}
	```
	is given by the formula
	``` tex 
	\oint_a \B(Fa,Ga)\cong \text{Fun}[\A, \B](F,G)
	```
	where $\text{Fun}[]\A, \B](F,G)$ is defined in \cite{Gray2}.
	\item Let's suppose that the 2-functor $S\colon \A^\text{op}\times\A \to \B$ is mute in the contravariant variable, i.e. that there is a factorization $S = S'\circ p\colon \A^\text{op}\times\A \xto{p} \A \xto{S'} \B$
	``` tex 
	\oint_a S(a,a)\cong \underrightarrow{q\text{-lim}} S'
	```
	hence every cartesian limit can be computed as a cartesian end. In particular, if $\A$ is locally discrete (i.e. identified with a locally small 1-category) and if the functor $S'\colon \A\to \B$ is constant, i.e. $S'(a) \equiv b$ for each $a\in \A$, then $\oint_a S$ is called \emph{cotensor} of $b$ by $\A$ and is denoted $b\pitchfork \A$.
	\item Definitions above (\textcolor{red}{insert hyperlinks} can be dualized to obtain \emph{cartesian coends} for a functor $S\colon \A^\text{op}\times \A\to \B$, denoted $\oint^a S(a,a)$.

	We obtain in this way the notion of \emph{tensor} of a category $\cate{T}$ with an object $a\in\A$, denoted $\cate{T}\boxtimes a$; it is characterized by the natural isomorphism (in $x$)
	``` tex 
	\cate{Cat}(\cate{T}, \A(a, x))\cong \A(\cate{T}\boxtimes a, x).
	```
	\item Let $S\colon \A^\text{op}\to \cate{Cat}$, $T\colon \A\to \B$ be two functors and suppose $\B$ has $\cate{Cat}$-tensors; then the cartesian coend of the 2-functor $\A^\text{op}\times \A\to \cate{Cat}\times\B\to \B$ is called $q$-\emph{tensor product} of $S$ and $T$, denoted
	``` tex 
	S\otimes T =: \oint^a Sa\boxtimes Ta.
	```
\end{enumerate}
\end{es}
\begin{thm}
In a 2-category $\B$ cartesian ends exist provided that $\B$ has comma objects and $\bf Cat$-limits.
\end{thm}
\begin{thm}
The cartesian end of the functor $T\colon \A^\text{op}\times \A \to \B$, ifit exists, is uniquely determined by the natural isomorphism
``` tex 
	\B\left(x, \oint_a T(a,a)\right)\cong \oint_a \B(x, T(a,a))
```
for every object $x\in \A$.
\end{thm}
\begin{thm}[Parametric Cartesian Ends]
Whenever a functor $F\colon \A^\text{op}\times \A\times \B\to \C$ is defined, and the cartesian end $\oint_a F(b, a,a)$ exists for every $B\in \B$, then $b\mapsto \oint_a F(b, a,a)$ extends to a 2-functor $\B\to \C$ which has the universal property of the cartesian end of the mate $\hat F\colon \A^\text{op}\times \A \to \C^{\B}$.
\end{thm}
\begin{thm}[Double Ends]
If one among the following two cartesian ends exists, then so does the other, and the two are canonically isomorphic:
``` tex 
	\oint_{b,c}T(b,c,b,c)\qquad \qquad \oint_b\left(\oint_c T(b,c,b,c)\right)
```
\end{thm}
\begin{cor}
If one among the following two cartesian ends exists, then so does the other, and the two are canonically isomorphic:
``` tex 
	\oint_{b,c}T(b,c,b,c)\qquad \qquad \oint_c\left(\oint_b T(b,c,b,c)\right)
```
\end{cor}
\begin{cor}
Cartesian projective limits commute: if $T\colon \B\times \C\to \D$ is a 2-functor, we have
``` tex 
	\underset{b\in \B}{\underrightarrow{q\text{-lim}}}\;
	\underset{c\in \C}{\underrightarrow{q\text{-lim}}}\; T(b,c)
	\cong 
	\underset{c\in \C}{\underrightarrow{q\text{-lim}}} \; 
	\underset{b\in \B}{\underrightarrow{q\text{-lim}}} \;  T(b,c).
```
\end{cor}
\paragraph{Application: $2$-distributors.} A \emph{2-distributor} $\varphi \colon \A\leadsto \B$ is a 2-functor $\varphi\colon \B^\text{op}\times \A\to \cate{Cat}$. Cartesian coends gives a method to compose 2-distributors, as in the 1-dimensional case: more precisely, let
``` tex 
	\A \overset{\varphi}{\leadsto}\B \overset{\psi}{\leadsto} \C
```
be a couple of composable 2-distributors, namely two 2-functors $\varphi\colon \B^\text{op}\times \A\to \cate{Cat}$ and $\psi\colon \C^\text{op}\times \B\to \cate{Cat}$; then the composition $\psi\diamond \varphi$ is defined by the coend
``` tex 
	\psi\diamond \varphi(c,a) = \int^b \varphi(b,a)\times \psi(c,b)
```
Theorem \ref{} above ensures that
``` tex 
(\omega \diamond \psi)\diamond\varphi \cong \omega \diamond (\psi\diamond \varphi)
```
for any three $\A\overset{\varphi}\leadsto\B\overset{\psi}\leadsto\C\overset{\omega}\leadsto\D$.
\section{Quasi-Kan Extensions.} Let $T\colon \A\to \B$ and $\varphi\colon \A\to \C$ be two 2-functors.
\begin{df}
We call \emph{(left) quasi-Kan extension} of $\varphi$ along $T$ a 2-functor $\text{Lan}_T\varphi\colon \B\to \C$ endowed with a quasi-natural transformation $a\colon \varphi \Rightarrow \text{Lan}_T\varphi\circ T$ (a \emph{unit}) such that, for each 2-functor $S\colon \B\to \C$ endowed with $\lambda \colon \varphi \Rightarrow S\circ T$ there exists a unique $\cate{Cat}$-natural transformation $\zeta\colon \text{Lan}_T\varphi \Rightarrow S$ such that 
``` tex 
	(\zeta * T)\circ \alpha = \lambda 
```
and moreover, if $\sigma\colon \lambda \to \lambda'$ is a modification between quasi-natural transformations, there is a unique modification $\omega\colon \zeta\to \zeta'$ (where $\zeta$ is induced by $\lambda$, and $\zeta'$ by $\lambda'$) between $\cate{Cat}$-natural transformations such that $(\omega * T)\circ \alpha = \sigma$. This can be expressed with the isomorphism
``` tex 
	\text{Fun}(\A, \C)\Big[ \varphi, S\circ T \Big]\cong 
	\C^{\B}\Big[ \text{Lan}_T\varphi, S \Big]
```
which is natural in $S$.
\end{df}
\begin{es}
The quasi-Kan extension of a 2-functor $\varphi\colon \A\to\C$ along the trivial 2-functor $\A\to \cate{1}$ is the cartesian colimit of $\varphi$.
\end{es}
\begin{oss}
We can obtain different notions of quasi-Kan extension by reversing the directions of $\alpha, \lambda, \zeta$ etc (see also \ref{bla}).

The example above, as well as the following theorem, shows that the choice of $\cate{Cat}$-natural transformations instead of quasi-natural transformations is the right choice:
\end{oss}
\begin{thm}
Notations as above. If $\C$ has at least tensors $\B(Ta, b)\boxtimes \varphi a'$ for each $a, a'\in \A$, and the cartesian coends
``` tex 
	\oint^a \B(Ta, b)\boxtimes \varphi a
```
then the quasi-Kan extension of $\varphi$ along $T$ exists, and it is given by the formula above.
\end{thm} -->